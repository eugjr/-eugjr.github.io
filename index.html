<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Lista de Miniaturas</title>
    <style>
            body {
        max-width: 100vw;
        overflow-x: hidden;
    }
        /* Estilos CSS */
    .thumbnail {
        width: 100px;
        height: auto;
    }

    .search-bar {
        margin-bottom: 10px;
    }

    .table-row-even {
        background-color: #f2f2f2;
    }

    .table-row-odd {
        background-color: #ffffff;
    }

    .table-row-title {
        background-color: #c0e4d6;
    }

    .popup-container {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: #ffffff;
        padding: 20px;
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
    }

    .popup-image {
        width: 100%;
        height: auto;
    }
</style>
</head>
<body>
    <h1>Lista de Miniaturas</h1>
<!-- Botão para acessar a página de dashboard -->
<a href="dashboard.html">Dashboard</a>

<!-- Barra de busca geral -->
<input type="text" id="searchInput" class="search-bar" placeholder="Digite para buscar">

<!-- Tabela para exibir os dados -->
<table id="tabela-dados">
    <thead>
        <tr class="table-row-title">
            <th>Model Name<input type="text" class="column-filter" placeholder="Filtro"></th>
            <th>Release Year<input type="text" class="column-filter" placeholder="Filtro"></th>
            <th>Series<input type="text" class="column-filter" placeholder="Filtro"></th>
            <th>Color<input type="text" class="column-filter" placeholder="Filtro"></th>
            <th>Tampo<input type="text" class="column-filter" placeholder="Filtro"></th>
            <th>Wheel Type<input type="text" class="column-filter" placeholder="Filtro"></th>
            <th>Base Type<input type="text" class="column-filter" placeholder="Filtro"></th>
            <th>Base Color<input type="text" class="column-filter" placeholder="Filtro"></th>
            <th>Window Color<input type="text" class="column-filter" placeholder="Filtro"></th>
            <th>Interior Color<input type="text" class="column-filter" placeholder="Filtro"></th>
            <th>Toy #<input type="text" class="column-filter" placeholder="Filtro"></th>
            <th>Scale<input type="text" class="column-filter" placeholder="Filtro"></th>
            <th>Country<input type="text" class="column-filter" placeholder="Filtro"></th>
            <th>Notes<input type="text" class="column-filter" placeholder="Filtro"></th>
            <th>Base Codes<input type="text" class="column-filter" placeholder="Filtro"></th>
            <th>Case Number<input type="text" class="column-filter" placeholder="Filtro"></th>
            <th>Mainline<input type="text" class="column-filter" placeholder="Filtro"></th>
            <th>Hiperlink Imagem<input type="text" class="column-filter" placeholder="Filtro"></th>
        </tr>
    </thead>
    <tbody>
        <!-- Linhas de dados -->
    </tbody>
</table>

<!-- Popup para exibir a imagem -->
<div id="popupContainer" class="popup-container">
    <img id="popupImage" class="popup-image">
</div>

<script>
    // Carregar os dados do arquivo JSON
    fetch('base_dados.json')
        .then(response => response.json())
        .then(data => {
            exibirDados(data);
            adicionarEventos();
        })
        .catch(error => console.error(error));

    // Função para exibir os dados na tabela
    function exibirDados(dados) {
        const tabela = document.getElementById('tabela-dados');
        const tbody = tabela.querySelector('tbody');

        // Iterar sobre os dados e criar as linhas da tabela
        dados.forEach((dado, index) => {
            const linha = document.createElement('tr');
            linha.classList.add(index % 2 === 0 ? 'table-row-even' : 'table-row-odd');

            // Adicionar as células da linha com os valores dos dados
            for (const prop in dado) {
                const celula = document.createElement('td');

                if (prop === 'Hiperlink Imagem') {
                    // Criar um elemento de imagem (thumbnail) clicável
                    const imagem = document.createElement('img');
                    imagem.classList.add('thumbnail');
                    imagem.src = dado[prop];
                    imagem.addEventListener('click', () => {
                        exibirImagemPopup(dado[prop]);
                    });
                    celula.appendChild(imagem);
                } else {
                    celula.textContent = dado[prop];
                }

                linha.appendChild(celula);
            }

            // Adicionar a linha à tabela
            tbody.appendChild(linha);
        });
    }

    // Função para adicionar eventos aos elementos da tabela
    function adicionarEventos() {
        const searchInput = document.getElementById('searchInput');
        const tabela = document.getElementById('tabela-dados');
        const tbody = tabela.querySelector('tbody');
        const linhas = Array.from(tbody.getElementsByTagName('tr'));

        // Evento de busca geral
        searchInput.addEventListener('input', () => {
            const termoBusca = searchInput.value.toLowerCase();

            linhas.forEach(linha => {
                const valoresCelulas = Array.from(linha.getElementsByTagName('td')).map(celula => celula.textContent.toLowerCase());

                if (valoresCelulas.some(valor => valor.includes(termoBusca))) {
                    linha.style.display = '';
                } else {
                    linha.style.display = 'none';
                }
            });
        });

        // Eventos de filtro por coluna
        const columnFilters = Array.from(document.getElementsByClassName('column-filter'));
        columnFilters.forEach(columnFilter => {
            columnFilter.addEventListener('input', () => {
                const termoFiltro = columnFilter.value.toLowerCase();
                const columnIndex = Array.from(columnFilter.parentNode.parentNode.children).indexOf(columnFilter.parentNode);

                linhas.forEach(linha => {
                    const celula = linha.children[columnIndex];
                    const valorCelula = celula.textContent.toLowerCase();

                    if (valorCelula.includes(termoFiltro)) {
                        linha.style.display = '';
                    } else {
                        linha.style.display = 'none';
                    }
                });
            });
        });
    }

    // Função para exibir a imagem em popup
    function exibirImagemPopup(imagemUrl) {
        const popupImage = document.getElementById('popupImage');
        popupImage.src = imagemUrl;
        const popupContainer = document.getElementById('popupContainer');
        popupContainer.style.display = 'block';
    }

    // Fechar a imagem em popup ao clicar fora dela
    window.addEventListener('click', event => {
        const popupContainer = document.getElementById('popupContainer');
        if (event.target === popupContainer) {
            popupContainer.style.display = 'none';
        }
    });
</script>
</body>
</html>
