<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Lista de Miniaturas</title>
    <style>
        /* Estilos CSS */
    .thumbnail {
        width: 100px;
        height: auto;
    }

    .search-bar {
        margin-bottom: 10px;
    }

    .table-row-even {
        background-color: #f2f2f2;
    }

    .table-row-odd {
        background-color: #ffffff;
    }

    .table-row-header {
        background-color: #c1e2b3;
    }

    .table-row-header input {
        width: 100%;
        box-sizing: border-box;
    }
</style>
</head>
<body>
    <h1>Lista de Miniaturas</h1>
<!-- Barra de busca -->
<input type="text" id="searchInput" class="search-bar" placeholder="Digite para buscar">

<!-- Tabela para exibir os dados -->
<table id="tabela-dados" class="table">
    <thead>
        <tr class="table-row-header">
            <th>Model Name <input type="text" class="search-bar" placeholder="Filtrar por Model Name"></th>
            <th>Release Year <input type="text" class="search-bar" placeholder="Filtrar por Release Year"></th>
            <th>Series <input type="text" class="search-bar" placeholder="Filtrar por Series"></th>
            <th>Color <input type="text" class="search-bar" placeholder="Filtrar por Color"></th>
            <th>Tampo <input type="text" class="search-bar" placeholder="Filtrar por Tampo"></th>
            <th>Wheel Type <input type="text" class="search-bar" placeholder="Filtrar por Wheel Type"></th>
            <th>Base Type <input type="text" class="search-bar" placeholder="Filtrar por Base Type"></th>
            <th>Base Color <input type="text" class="search-bar" placeholder="Filtrar por Base Color"></th>
            <th>Window Color <input type="text" class="search-bar" placeholder="Filtrar por Window Color"></th>
            <th>Interior Color <input type="text" class="search-bar" placeholder="Filtrar por Interior Color"></th>
            <th>Toy # <input type="text" class="search-bar" placeholder="Filtrar por Toy #"></th>
            <th>Scale <input type="text" class="search-bar" placeholder="Filtrar por Scale"></th>
            <th>Country <input type="text" class="search-bar" placeholder="Filtrar por Country"></th>
            <th>Notes <input type="text" class="search-bar" placeholder="Filtrar por Notes"></th>
            <th>Base Codes <input type="text" class="search-bar" placeholder="Filtrar por Base Codes"></th>
            <th>Case Number <input type="text" class="search-bar" placeholder="Filtrar por Case Number"></th>
            <th>Mainline <input type="text" class="search-bar" placeholder="Filtrar por Mainline"></th>
            <th>Hiperlink Imagem</th>
        </tr>
    </thead>
    <tbody>
        <!-- Linhas de dados -->
    </tbody>
</table>

<!-- Container para a imagem em popup -->
<div id="popupContainer" class="popup-container">
    <img id="popupImage" class="popup-image" src="" alt="Imagem em popup">
</div>

<script>
    // Carregar os dados do arquivo JSON
    fetch('base_dados.json')
        .then(response => response.json())
        .then(data => {
            exibirDados(data);
            adicionarEventos();
        })
        .catch(error => console.error(error));

    // Função para exibir os dados na tabela
    function exibirDados(dados) {
        const tabela = document.getElementById('tabela-dados');
        const tbody = tabela.querySelector('tbody');

        // Iterar sobre os dados e criar as linhas da tabela
        dados.forEach((dado, index) => {
            const linha = document.createElement('tr');
            linha.classList.add(index % 2 === 0 ? 'table-row-even' : 'table-row-odd');

            // Adicionar as células da linha com os valores dos dados
            for (const prop in dado) {
                const celula = document.createElement('td');

                if (prop === 'Hiperlink Imagem') {
                    // Criar um elemento de imagem (thumbnail) clicável
                    const imagem = document.createElement('img');
                    imagem.classList.add('thumbnail');
                    imagem.src = dado[prop];
                    imagem.addEventListener('click', () => {
                        exibirImagemPopup(dado[prop]);
                    });
                    celula.appendChild(imagem);
                } else {
                    celula.textContent = dado[prop];
                }

                linha.appendChild(celula);
            }

            // Adicionar a linha à tabela
            tbody.appendChild(linha);
        });
    }

    // Função para adicionar eventos aos elementos da tabela
    function adicionarEventos() {
        const searchInput = document.getElementById('searchInput');
        const tabela = document.getElementById('tabela-dados');
        const tbody = tabela.querySelector('tbody');
        const linhas = Array.from(tbody.getElementsByTagName('tr'));

        // Evento de busca geral
        searchInput.addEventListener('input', () => {
            const termoBusca = searchInput.value.toLowerCase();

            linhas.forEach(linha => {
                const valoresCelulas = Array.from(linha.getElementsByTagName('td')).map(celula => celula.textContent.toLowerCase());

                if (valoresCelulas.some(valor => valor.includes(termoBusca))) {
                    linha.style.display = '';
                } else {
                    linha.style.display = 'none';
                }
            });
        });

        // Eventos de filtro de colunas
        const colunasFiltro = Array.from(tabela.querySelectorAll('th input'));
        colunasFiltro.forEach(coluna => {
            coluna.addEventListener('input', () => {
                const colunaIndex = getIndexByColumnName(coluna.parentNode.textContent);
                const termoFiltro = coluna.value.toLowerCase();

                linhas.forEach(linha => {
                    const valorCelula = getCellValue(linha, colunaIndex).toLowerCase();

                    if (valorCelula.includes(termoFiltro)) {
                        linha.style.display = '';
                    } else {
                        linha.style.display = 'none';
                    }
                });
            });
        });
    }

    // Função para obter o valor de uma célula específica
    function getCellValue(linha, indexColuna) {
        const celulas = linha.getElementsByTagName('td');
        return celulas[indexColuna].textContent;
    }

    // Função para obter o índice da coluna pelo nome da coluna
    function getIndexByColumnName(columnName) {
        const tabela = document.getElementById('tabela-dados');
        const colunas = Array.from(tabela.getElementsByTagName('th'));
        return colunas.findIndex(coluna => coluna.textContent === columnName);
    }

    // Função para exibir a imagem em popup
    function exibirImagemPopup(imagemUrl) {
        const popupImage = document.getElementById('popupImage');
        popupImage.src = imagemUrl;
        const popupContainer = document.getElementById('popupContainer');
        popupContainer.style.display = 'block';
    }

    // Fechar a imagem em popup ao clicar fora dela
    window.addEventListener('click', event => {
        const popupContainer = document.getElementById('popupContainer');
        if (event.target === popupContainer) {
            popupContainer.style.display = 'none';
        }
    });
</script>
</body>
</html>
